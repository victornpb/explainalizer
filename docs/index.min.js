!function(){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function h(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?t(Object(i),!0).forEach(function(e){var t,n;t=r,e=i[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};for(var n,r={},i=Object.keys(e),a=0;a<i.length;a++)n=i[a],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)n=i[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=i(n);return e=r?(e=i(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!=typeof e&&"function"!=typeof e?c(t):e}}function d(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function e(e,t){return e(t={exports:{}},t.exports),t.exports}var l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},p=e(function(e){var o=Array.prototype.concat,s=Array.prototype.slice,t=e.exports=function(e){for(var t,n=[],r=0,i=e.length;r<i;r++){var a=e[r];(t=a)&&"string"!=typeof t&&(t instanceof Array||Array.isArray(t)||0<=t.length&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))?n=o.call(n,s.call(a)):n.push(a)}return n};t.wrap=function(e){return function(){return e(t(arguments))}}}),m=e(function(e){var t,n={};for(t in l)l.hasOwnProperty(t)&&(n[l[t]]=t);var r=e.exports={to:{},get:{}};function o(e,t,n){return Math.min(Math.max(t,e),n)}function i(e){e=e.toString(16).toUpperCase();return e.length<2?"0"+e:e}r.get=function(e){var t,n;switch(e.substring(0,3).toLowerCase()){case"hsl":t=r.get.hsl(e),n="hsl";break;case"hwb":t=r.get.hwb(e),n="hwb";break;default:t=r.get.rgb(e),n="rgb"}return t?{model:n,value:t}:null},r.get.rgb=function(e){if(!e)return null;var t,n,r,i=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=t[2],t=t[1],n=0;n<3;n++){var a=2*n;i[n]=parseInt(t.slice(a,2+a),16)}r&&(i[3]=parseInt(r,16)/255)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(r=(t=t[1])[3],n=0;n<3;n++)i[n]=parseInt(t[n]+t[n],16);r&&(i[3]=parseInt(r+r,16)/255)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(n=0;n<3;n++)i[n]=parseInt(t[n+1],0);t[4]&&(i[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(t=e.match(/(\D+)/))?"transparent"===t[1]?[0,0,0,0]:(i=l[t[1]])?(i[3]=1,i):null:null;for(n=0;n<3;n++)i[n]=Math.round(2.55*parseFloat(t[n+1]));t[4]&&(i[3]=parseFloat(t[4]))}for(n=0;n<3;n++)i[n]=o(i[n],0,255);return i[3]=o(i[3],0,1),i},r.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){e=parseFloat(t[4]);return[(parseFloat(t[1])+360)%360,o(parseFloat(t[2]),0,100),o(parseFloat(t[3]),0,100),o(isNaN(e)?1:e,0,1)]}return null},r.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){e=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,o(parseFloat(t[2]),0,100),o(parseFloat(t[3]),0,100),o(isNaN(e)?1:e,0,1)]}return null},r.to.hex=function(){var e=p(arguments);return"#"+i(e[0])+i(e[1])+i(e[2])+(e[3]<1?i(Math.round(255*e[3])):"")},r.to.rgb=function(){var e=p(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},r.to.rgb.percent=function(){var e=p(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"},r.to.hsl=function(){var e=p(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},r.to.hwb=function(){var e=p(arguments),t="";return 4<=e.length&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},r.to.keyword=function(e){return n[e.slice(0,3)]}});m.to,m.get;var g=e(function(e){var t,s={};for(t in l)l.hasOwnProperty(t)&&(s[l[t]]=t);var n,i=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(n in i)if(i.hasOwnProperty(n)){if(!("channels"in i[n]))throw new Error("missing channels property: "+n);if(!("labels"in i[n]))throw new Error("missing channel labels property: "+n);if(i[n].labels.length!==i[n].channels)throw new Error("channel and label counts mismatch: "+n);var r=i[n].channels,a=i[n].labels;delete i[n].channels,delete i[n].labels,Object.defineProperty(i[n],"channels",{value:r}),Object.defineProperty(i[n],"labels",{value:a})}i.rgb.hsl=function(e){var t,n=e[0]/255,r=e[1]/255,i=e[2]/255,a=Math.min(n,r,i),o=Math.max(n,r,i),e=o-a;return o===a?t=0:n===o?t=(r-i)/e:r===o?t=2+(i-n)/e:i===o&&(t=4+(n-r)/e),(t=Math.min(60*t,360))<0&&(t+=360),r=(a+o)/2,[t,100*(o===a?0:r<=.5?e/(o+a):e/(2-o-a)),100*r]},i.rgb.hsv=function(e){var t,n,r,i=e[0]/255,a=e[1]/255,o=e[2]/255,s=Math.max(i,a,o),l=s-Math.min(i,a,o),h=function(e){return(s-e)/6/l+.5};return 0==l?n=r=0:(r=l/s,t=h(i),e=h(a),h=h(o),i===s?n=h-e:a===s?n=1/3+t-h:o===s&&(n=2/3+e-t),n<0?n+=1:1<n&&--n),[360*n,100*r,100*s]},i.rgb.hwb=function(e){var t=e[0],n=e[1],r=e[2];return[i.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(n,r))),100*(r=1-1/255*Math.max(t,Math.max(n,r)))]},i.rgb.cmyk=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255,e=Math.min(1-t,1-n,1-r);return[100*((1-t-e)/(1-e)||0),100*((1-n-e)/(1-e)||0),100*((1-r-e)/(1-e)||0),100*e]},i.rgb.keyword=function(e){var t=s[e];if(t)return t;var n,r,i,a,o=1/0;for(r in l)l.hasOwnProperty(r)&&(a=l[r],i=e,a=a,(a=Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2)+Math.pow(i[2]-a[2],2))<o&&(o=a,n=r));return n},i.keyword.rgb=function(e){return l[e]},i.rgb.xyz=function(e){var t=e[0]/255,n=e[1]/255,e=e[2]/255;return[100*(.4124*(t=.04045<t?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=.04045<n?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(e=.04045<e?Math.pow((e+.055)/1.055,2.4):e/12.92)),100*(.2126*t+.7152*n+.0722*e),100*(.0193*t+.1192*n+.9505*e)]},i.rgb.lab=function(e){var t=i.rgb.xyz(e),n=t[0],e=t[1],t=t[2];return e/=100,t/=108.883,n=.008856<(n/=95.047)?Math.pow(n,1/3):7.787*n+16/116,[116*(e=.008856<e?Math.pow(e,1/3):7.787*e+16/116)-16,500*(n-e),200*(e-(t=.008856<t?Math.pow(t,1/3):7.787*t+16/116))]},i.hsl.rgb=function(e){var t,n,r=e[0]/360,i=e[1]/100,e=e[2]/100;if(0==i)return[n=255*e,n,n];for(var a,o=2*e-(a=e<.5?e*(1+i):e+i-e*i),s=[0,0,0],l=0;l<3;l++)(t=r+1/3*-(l-1))<0&&t++,1<t&&t--,n=6*t<1?o+6*(a-o)*t:2*t<1?a:3*t<2?o+(a-o)*(2/3-t)*6:o,s[l]=255*n;return s},i.hsl.hsv=function(e){var t=e[0],n=e[1]/100,r=e[2]/100,i=n,e=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,i*=e<=1?e:2-e,[t,100*(0==r?2*i/(e+i):2*n/(r+n)),100*((r+n)/2)]},i.hsv.rgb=function(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,e=Math.floor(t)%6,t=t-Math.floor(t),i=255*r*(1-n),a=255*r*(1-n*t),o=255*r*(1-n*(1-t));switch(r*=255,e){case 0:return[r,o,i];case 1:return[a,r,i];case 2:return[i,r,o];case 3:return[i,a,r];case 4:return[o,i,r];case 5:return[r,i,a]}},i.hsv.hsl=function(e){var t=e[0],n=e[1]/100,r=e[2]/100,i=Math.max(r,.01),e=(2-n)*r,r=(2-n)*i,i=n*i;return[t,100*((i/=r<=1?r:2-r)||0),100*(e/=2)]},i.hwb.rgb=function(e){var t,n,r,i,a,o=e[0]/360,s=e[1]/100,l=e[2]/100,e=s+l;switch(1<e&&(s/=e,l/=e),o=6*o-(e=Math.floor(6*o)),n=s+(o=0!=(1&e)?1-o:o)*((t=1-l)-s),e){default:case 6:case 0:r=t,i=n,a=s;break;case 1:r=n,i=t,a=s;break;case 2:r=s,i=t,a=n;break;case 3:r=s,i=n,a=t;break;case 4:r=n,i=s,a=t;break;case 5:r=t,i=s,a=n}return[255*r,255*i,255*a]},i.cmyk.rgb=function(e){var t=e[0]/100,n=e[1]/100,r=e[2]/100,e=e[3]/100;return[255*(1-Math.min(1,t*(1-e)+e)),255*(1-Math.min(1,n*(1-e)+e)),255*(1-Math.min(1,r*(1-e)+e))]},i.xyz.rgb=function(e){var t=e[0]/100,n=e[1]/100,r=e[2]/100,i=3.2406*t+-1.5372*n+-.4986*r,e=-.9689*t+1.8758*n+.0415*r,r=.0557*t+-.204*n+1.057*r;return i=.0031308<i?1.055*Math.pow(i,1/2.4)-.055:12.92*i,e=.0031308<e?1.055*Math.pow(e,1/2.4)-.055:12.92*e,r=.0031308<r?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(i=Math.min(Math.max(0,i),1)),255*(e=Math.min(Math.max(0,e),1)),255*(r=Math.min(Math.max(0,r),1))]},i.xyz.lab=function(e){var t=e[0],n=e[1],e=e[2];return n/=100,e/=108.883,t=.008856<(t/=95.047)?Math.pow(t,1/3):7.787*t+16/116,[116*(n=.008856<n?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(e=.008856<e?Math.pow(e,1/3):7.787*e+16/116))]},i.lab.xyz=function(e){var t=(e[0]+16)/116,n=e[1]/500+t,r=t-e[2]/200,i=Math.pow(t,3),a=Math.pow(n,3),e=Math.pow(r,3);return t=.008856<i?i:(t-16/116)/7.787,n=.008856<a?a:(n-16/116)/7.787,r=.008856<e?e:(r-16/116)/7.787,[n*=95.047,t*=100,r*=108.883]},i.lab.lch=function(e){var t=e[0],n=e[1],r=e[2],e=360*Math.atan2(r,n)/2/Math.PI;return e<0&&(e+=360),[t,Math.sqrt(n*n+r*r),e]},i.lch.lab=function(e){var t=e[0],n=e[1],e=e[2]/360*2*Math.PI;return[t,n*Math.cos(e),n*Math.sin(e)]},i.rgb.ansi16=function(e){var t=e[0],n=e[1],r=e[2],e=1 in arguments?arguments[1]:i.rgb.hsv(e)[2];if(0===(e=Math.round(e/50)))return 30;t=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return 2===e&&(t+=60),t},i.hsv.ansi16=function(e){return i.rgb.ansi16(i.hsv.rgb(e),e[2])},i.rgb.ansi256=function(e){var t=e[0],n=e[1],e=e[2];return t===n&&n===e?t<8?16:248<t?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(e/255*5)},i.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return 50<e&&(t+=3.5),[t=t/10.5*255,t,t];e=.5*(1+~~(50<e));return[(1&t)*e*255,(t>>1&1)*e*255,(t>>2&1)*e*255]},i.ansi256.rgb=function(e){if(232<=e){var t=10*(e-232)+8;return[t,t,t]}return e-=16,[Math.floor(e/36)/5*255,Math.floor((e=e%36)/6)/5*255,e%6/5*255]},i.rgb.hex=function(e){e=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},i.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];e=t[0];3===t[0].length&&(e=e.split("").map(function(e){return e+e}).join(""));e=parseInt(e,16);return[e>>16&255,e>>8&255,255&e]},i.rgb.hcg=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.max(Math.max(t,n),r),a=Math.min(Math.min(t,n),r),e=i-a,a=e<1?a/(1-e):0,n=e<=0?0:i===t?(n-r)/e%6:i===n?2+(r-t)/e:4+(t-n)/e+4;return n/=6,[360*(n%=1),100*e,100*a]},i.hsl.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=1,i=0;return(r=n<.5?2*t*n:2*t*(1-n))<1&&(i=(n-.5*r)/(1-r)),[e[0],100*r,100*i]},i.hsv.hcg=function(e){var t=e[1]/100,n=e[2]/100,t=t*n,n=t<1?(n-t)/(1-t):0;return[e[0],100*t,100*n]},i.hcg.rgb=function(e){var t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0==n)return[255*r,255*r,255*r];var i=[0,0,0],e=t%1*6,a=e%1,o=1-a;switch(Math.floor(e)){case 0:i[0]=1,i[1]=a,i[2]=0;break;case 1:i[0]=o,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=a;break;case 3:i[0]=0,i[1]=o,i[2]=1;break;case 4:i[0]=a,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=o}return t=(1-n)*r,[255*(n*i[0]+t),255*(n*i[1]+t),255*(n*i[2]+t)]},i.hcg.hsv=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t),t=0<n?t/n:0;return[e[0],100*t,100*n]},i.hcg.hsl=function(e){var t=e[1]/100,n=e[2]/100*(1-t)+.5*t,r=0;return 0<n&&n<.5?r=t/(2*n):.5<=n&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},i.hcg.hwb=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},i.hwb.hcg=function(e){var t=e[1]/100,n=1-e[2]/100,t=n-t,n=t<1?(n-t)/(1-t):0;return[e[0],100*t,100*n]},i.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},i.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},i.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},i.gray.hsl=i.gray.hsv=function(e){return[0,0,e[0]]},i.gray.hwb=function(e){return[0,100,e[0]]},i.gray.cmyk=function(e){return[0,0,0,e[0]]},i.gray.lab=function(e){return[e[0],0,0]},i.gray.hex=function(e){e=255&Math.round(e[0]/100*255),e=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(e.length)+e},i.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}});function v(e){var t=function(){for(var e={},t=Object.keys(g),n=t.length,r=0;r<n;r++)e[t[r]]={distance:-1,parent:null};return e}(),n=[e];for(t[e].distance=0;n.length;)for(var r=n.pop(),i=Object.keys(g[r]),a=i.length,o=0;o<a;o++){var s=i[o],l=t[s];-1===l.distance&&(l.distance=t[r].distance+1,l.parent=r,n.unshift(s))}return t}function y(e,t){for(var n=[t[e].parent,e],r=g[t[e].parent][e],i=t[e].parent;t[i].parent;)n.unshift(t[i].parent),r=function(t,n){return function(e){return n(t(e))}}(g[t[i].parent][i],r),i=t[i].parent;return r.conversion=n,r}g.rgb,g.hsl,g.hsv,g.hwb,g.cmyk,g.xyz,g.lab,g.lch,g.hex,g.keyword,g.ansi16,g.ansi256,g.hcg,g.apple,g.gray;var b={};function w(t){function e(e){return null==e?e:(1<arguments.length&&(e=Array.prototype.slice.call(arguments)),t(e))}return"conversion"in t&&(e.conversion=t.conversion),e}function x(i){function e(e){if(null==e)return e;1<arguments.length&&(e=Array.prototype.slice.call(arguments));var t=i(e);if("object"==typeof t)for(var n=t.length,r=0;r<n;r++)t[r]=Math.round(t[r]);return t}return"conversion"in i&&(e.conversion=i.conversion),e}Object.keys(g).forEach(function(n){b[n]={},Object.defineProperty(b[n],"channels",{value:g[n].channels}),Object.defineProperty(b[n],"labels",{value:g[n].labels});var r=function(e){for(var t=v(e),n={},r=Object.keys(t),i=r.length,a=0;a<i;a++){var o=r[a];null!==t[o].parent&&(n[o]=y(o,t))}return n}(n);Object.keys(r).forEach(function(e){var t=r[e];b[n][e]=x(t),b[n][e].raw=w(t)})});var k=b,M=[].slice,S=["keyword","gray","hex"],P={};Object.keys(k).forEach(function(e){P[M.call(k[e].labels).sort().join("")]=e});var T={};function E(e,t){if(!(this instanceof E))return new E(e,t);if((t=t&&t in S?null:t)&&!(t in k))throw new Error("Unknown model: "+t);if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof E)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if("string"==typeof e){var n=m.get(e);if(null===n)throw new Error("Unable to parse color from string: "+e);this.model=n.model,r=k[this.model].channels,this.color=n.value.slice(0,r),this.valpha="number"==typeof n.value[r]?n.value[r]:1}else if(e.length){this.model=t||"rgb";var r=k[this.model].channels,i=M.call(e,0,r);this.color=O(i,r),this.valpha="number"==typeof e[r]?e[r]:1}else if("number"==typeof e)e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;i=Object.keys(e);"alpha"in e&&(i.splice(i.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0);i=i.sort().join("");if(!(i in P))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=P[i];for(var a=k[this.model].labels,o=[],s=0;s<a.length;s++)o.push(e[a[s]]);this.color=O(o)}if(T[this.model])for(r=k[this.model].channels,s=0;s<r;s++){var l=T[this.model][s];l&&(this.color[s]=l(this.color[s]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function n(n,r,i){return(n=Array.isArray(n)?n:[n]).forEach(function(e){(T[e]||(T[e]=[]))[r]=i}),n=n[0],function(e){var t;return arguments.length?(i&&(e=i(e)),(t=this[n]()).color[r]=e,t):(t=this[n]().color[r],t=i?i(t):t)}}function C(t){return function(e){return Math.max(0,Math.min(t,e))}}function O(e,t){for(var n=0;n<t;n++)"number"!=typeof e[n]&&(e[n]=0);return e}E.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in m.to?this:this.rgb(),e=1===(t=t.round("number"==typeof e?e:1)).valpha?t.color:t.color.concat(this.valpha);return m.to[t.model](e)},percentString:function(e){e=this.rgb().round("number"==typeof e?e:1),e=1===e.valpha?e.color:e.color.concat(this.valpha);return m.to.rgb.percent(e)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=k[this.model].channels,n=k[this.model].labels,r=0;r<t;r++)e[n[r]]=this.color[r];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new E(this.color.map((n=e,function(e){return t=n,Number(e.toFixed(t));var t})).concat(this.valpha),this.model);var n},alpha:function(e){return arguments.length?new E(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:n("rgb",0,C(255)),green:n("rgb",1,C(255)),blue:n("rgb",2,C(255)),hue:n(["hsl","hsv","hsl","hwb","hcg"],0,function(e){return(e%360+360)%360}),saturationl:n("hsl",1,C(100)),lightness:n("hsl",2,C(100)),saturationv:n("hsv",1,C(100)),value:n("hsv",2,C(100)),chroma:n("hcg",1,C(100)),gray:n("hcg",2,C(100)),white:n("hwb",1,C(100)),wblack:n("hwb",2,C(100)),cyan:n("cmyk",0,C(100)),magenta:n("cmyk",1,C(100)),yellow:n("cmyk",2,C(100)),black:n("cmyk",3,C(100)),x:n("xyz",0,C(100)),y:n("xyz",1,C(100)),z:n("xyz",2,C(100)),l:n("lab",0,C(100)),a:n("lab",1),b:n("lab",2),keyword:function(e){return arguments.length?new E(e):k[this.model].keyword(this.color)},hex:function(e){return arguments.length?new E(e):m.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity:function(){for(var e=this.rgb().color,t=[],n=0;n<e.length;n++){var r=e[n]/255;t[n]=r<=.03928?r/12.92:Math.pow((.055+r)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),e=e.luminosity();return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)},level:function(e){e=this.contrast(e);return 7.1<=e?"AAA":4.5<=e?"AA":""},isDark:function(){var e=this.rgb().color;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,e=.3*e[0]+.59*e[1]+.11*e[2];return E.rgb(e,e,e)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),n=t.color[0];return n=(n=(n+e)%360)<0?360+n:n,t.color[0]=n,t},mix:function(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);var n=e.rgb(),r=this.rgb(),i=void 0===t?.5:t,e=2*i-1,t=n.alpha()-r.alpha(),e=(1+(e*t==-1?e:(e+t)/(1+e*t)))/2,t=1-e;return E.rgb(e*n.red()+t*r.red(),e*n.green()+t*r.green(),e*n.blue()+t*r.blue(),n.alpha()*i+r.alpha()*(1-i))}},Object.keys(k).forEach(function(n){var r;-1===S.indexOf(n)&&(r=k[n].channels,E.prototype[n]=function(){if(this.model===n)return new E(this);if(arguments.length)return new E(arguments,n);var e,t="number"==typeof arguments[r]?r:this.valpha;return new E((e=k[this.model][n].raw(this.color),(Array.isArray(e)?e:[e]).concat(t)),n)},E[n]=function(e){return new E(e="number"==typeof e?O(M.call(arguments),r):e,n)})});var R=E;function A(){}function L(){L.init.call(this)}function j(e){return void 0===e._maxListeners?L.defaultMaxListeners:e._maxListeners}function q(e,t,n,r){var i,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return(i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener||n),i=e._events),a=i[t]):(i=e._events=new A,e._eventsCount=0),a?("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),a.warned||(r=j(e))&&0<r&&a.length>r&&(a.warned=!0,(r=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",r.emitter=e,r.type=t,r.count=a.length,r=r,"function"==typeof console.warn?console.warn(r):console.log(r))):(a=i[t]=n,++e._eventsCount),e}function H(e,t,n){var r=!1;function i(){e.removeListener(t,i),r||(r=!0,n.apply(e,arguments))}return i.listener=n,i}function _(e){var t=this._events;if(t){e=t[e];if("function"==typeof e)return 1;if(e)return e.length}return 0}function z(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function N(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;e.forEach(function(e){t(e,n),e.children&&N(e.children,t,n+1)})}A.prototype=Object.create(null),(L.EventEmitter=L).usingDomains=!1,L.prototype.domain=void 0,L.prototype._events=void 0,L.prototype._maxListeners=void 0,L.defaultMaxListeners=10,L.init=function(){this.domain=null,L.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new A,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},L.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},L.prototype.getMaxListeners=function(){return j(this)},L.prototype.emit=function(e){var t,n,r,i="error"===e,a=this._events;if(a)i=i&&null==a.error;else if(!i)return!1;if(o=this.domain,i){if(i=arguments[1],o)return(i=i||new Error('Uncaught, unspecified "error" event')).domainEmitter=this,i.domain=o,i.domainThrown=!1,o.emit("error",i),!1;if(i instanceof Error)throw i;var o=new Error('Uncaught, unspecified "error" event. ('+i+")");throw o.context=i,o}if(!(t=a[e]))return!1;var s,l="function"==typeof t;switch(s=arguments.length){case 1:!function(e,t){if(l)e.call(t);else for(var n=e.length,r=z(e,n),i=0;i<n;++i)r[i].call(t)}(t,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,a=z(e,i),o=0;o<i;++o)a[o].call(n,r)}(t,l,this,arguments[1]);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var a=e.length,o=z(e,a),s=0;s<a;++s)o[s].call(n,r,i)}(t,l,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,i,a){if(t)e.call(n,r,i,a);else for(var o=e.length,s=z(e,o),l=0;l<o;++l)s[l].call(n,r,i,a)}(t,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(n=new Array(s-1),r=1;r<s;r++)n[r-1]=arguments[r];!function(e,t,n){if(l)e.apply(t,n);else for(var r=e.length,i=z(e,r),a=0;a<r;++a)i[a].apply(t,n)}(t,this,n)}return!0},L.prototype.addListener=function(e,t){return q(this,e,t,!1)},L.prototype.on=L.prototype.addListener,L.prototype.prependListener=function(e,t){return q(this,e,t,!0)},L.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,H(this,e,t)),this},L.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,H(this,e,t)),this},L.prototype.removeListener=function(e,t){var n,r,i,a,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new A:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length;0<a--;)if(n[a]===t||n[a].listener&&n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new A,this;delete r[e]}else!function(e){for(var t=i,n=t+1,r=e.length;n<r;t+=1,n+=1)e[t]=e[n];e.pop()}(n);r.removeListener&&this.emit("removeListener",e,o||t)}return this},L.prototype.removeAllListeners=function(e){var t,n=this._events;if(!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=new A,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new A:delete n[e]),this;if(0===arguments.length){for(var r,i=Object.keys(n),a=0;a<i.length;++a)"removeListener"!==(r=i[a])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new A,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(;this.removeListener(e,t[t.length-1]),t[0];);return this},L.prototype.listeners=function(e){var t=this._events,n=t&&(n=t[e])?"function"==typeof n?[n.listener||n]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(n):[];return n},L.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):_.call(e,t)},L.prototype.listenerCount=_,L.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var F=24,I="12px",B=R.hsl(180,30,70),D=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(l,L);var e,t,n,s=u(l);function l(e){var t=e.canvas,n=e.width;void 0===n&&t.width;var r=e.height;void 0===r&&t.height;var i=e.data,a=e.colors,o=void 0===a?{}:a,n=e.timestamps,r=void 0===n?[]:n,a=e.font,n=void 0===a?I:a,a=e.nodeHeight,e=void 0===a?F:a;return function(e){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}(this),(a=s.call(this)).timelineStart=0,a.timelineEnd=0,a.timelineDimension=0,a.timelineDelta=0,a.charWidth=0,a.charHeight=0,a.positionY=0,a.positionX=0,a.zoom=0,a.mouse={x:0,y:0},a.colors={},a.lastRandomColor=B,a.selectedRegion=null,a.hoveredRegion=null,a.font=n,a.nodeHeight=e,a.ctx=t.getContext("2d"),a.canvas=t,a.userColors=o,a.setTimestamps(r,!1),a.setData(i,!1),a.handleMouseWheel=a.handleMouseWheel.bind(c(a)),a.handleMouseDown=a.handleMouseDown.bind(c(a)),a.handleMouseUp=a.handleMouseUp.bind(c(a)),a.handleMouseUp=a.handleMouseUp.bind(c(a)),a.handleMouseClick=a.handleMouseClick.bind(c(a)),a.handleMouseMove=a.handleMouseMove.bind(c(a)),a.init(),a}return e=l,(t=[{key:"init",value:function(){var e,t;this.ctx&&(t=(e=this.ctx.measureText("w")).fontBoundingBoxAscent,this.blockPadding=Math.ceil((this.nodeHeight-(t+e.fontBoundingBoxDescent))/2+e.fontBoundingBoxDescent),this.charWidth=e.width,this.charHeight=t+e.fontBoundingBoxDescent,this.headerHeight=this.nodeHeight+this.charHeight+this.blockPadding,this.ctx.font=this.font,this.initView(),this.initListeners(),this.render())}},{key:"destroy",value:function(){this.removeListeners()}},{key:"setData",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.data=e,t&&this.update()}},{key:"setTimestamps",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.timestamps=e.map(function(e){var t=e.color;return h(h({},o(e,["color"])),{},{color:new R(t).alpha(.7).rgb().toString()})}),t&&this.update()}},{key:"update",value:function(){this.calcView(),this.render()}},{key:"calcView",value:function(){this.width=this.canvas.width,this.height=this.canvas.height,this.calcMinMax(),this.initialZoom=this.width/(this.max-this.min)}},{key:"resetView",value:function(){this.zoom=this.initialZoom,this.positionX=this.min}},{key:"initView",value:function(){this.calcView(),this.resetView()}},{key:"initListeners",value:function(){this.canvas&&(this.canvas.addEventListener("wheel",this.handleMouseWheel),this.canvas.addEventListener("mousedown",this.handleMouseDown),this.canvas.addEventListener("mouseup",this.handleMouseUp),this.canvas.addEventListener("mouseleave",this.handleMouseUp),this.canvas.addEventListener("click",this.handleMouseClick),this.canvas.addEventListener("mousemove",this.handleMouseMove))}},{key:"removeListeners",value:function(){this.canvas&&(this.canvas.removeEventListener("wheel",this.handleMouseWheel),this.canvas.removeEventListener("mousedown",this.handleMouseDown),this.canvas.removeEventListener("mouseup",this.handleMouseUp),this.canvas.removeEventListener("mouseleave",this.handleMouseUp),this.canvas.removeEventListener("click",this.handleMouseClick),this.canvas.removeEventListener("mousemove",this.handleMouseMove))}},{key:"handleMouseWheel",value:function(e){var t=e.deltaY,n=e.deltaX;e.preventDefault();e=this.calcRealView(),n/=this.zoom,t=t/1e3*this.zoom;this.tryToChangePosition(n),0!==(t=this.zoom-t>=this.initialZoom?t:this.zoom-this.initialZoom)&&(n=this.mouse.x/this.width,n=(e-this.width/(this.zoom-t))*n,this.zoom-=t,this.tryToChangePosition(n)),this.render()}},{key:"handleMouseDown",value:function(){this.moveActive=!0}},{key:"handleMouseUp",value:function(){this.moveActive=!1}},{key:"handleMouseClick",value:function(){this.handleRegionHit(this.mouse.x,this.mouse.y)}},{key:"handleMouseMove",value:function(e){var t,n;this.moveActive&&(t=this.mouse.y-e.offsetY,n=(this.mouse.x-e.offsetX)/this.zoom,this.tryToChangePosition(n),0<=this.positionY+t?this.positionY+=t:this.positionY=0),this.mouse.x=e.offsetX,this.mouse.y=e.offsetY;e=this.hoveredRegion;this.checkRegionHover(),(this.moveActive||this.hoveredRegion||e&&!this.hoveredRegion)&&this.render()}},{key:"tryToChangePosition",value:function(e){var t=this.calcRealView();this.positionX+e+t<=this.max&&this.positionX+e>=this.min?this.positionX+=e:this.positionX+e<=this.min?this.positionX=this.min:this.positionX+e+t>=this.max&&(this.positionX=this.max-t)}},{key:"calcRealView",value:function(){return this.width/this.zoom}},{key:"calcTimeline",value:function(){var e=this.max-this.min,t=e/(this.width/90),n=this.calcRealView(),e=n/e;this.timelineDelta=t/Math.pow(2,Math.floor(Math.log2(1/e))),this.timelineStart=Math.floor((this.positionX-this.min)/this.timelineDelta),this.timelineEnd=Math.ceil(n/this.timelineDelta)+this.timelineStart;n=3-Math.ceil(10*this.timelineDelta).toString().length;this.timelineDimension=0<n?n:0}},{key:"calcMinMax",value:function(){var e=this.data,t=this.timestamps,n=!0,r=0,i=0;N(e,function(e){var t=e.start,e=e.duration;n?(i=(r=t)+e,n=!1):(r=r<t?r:t,i=t+e<i?i:t+e)}),this.min=t.reduce(function(e,t){t=t.timestamp;return t<e?t:e},r),this.max=t.reduce(function(e,t){t=t.timestamp;return e<t?t:e},i)}},{key:"clearHitRegions",value:function(){this.hitRegions=[]}},{key:"addHitRegion",value:function(e,t,n,r,i){this.hitRegions.push({node:e,x:t,y:n,w:r,h:i})}},{key:"handleRegionHit",value:function(e,t){this.selectedRegion=this.getHoveredRegion(e,t),this.render(),this.handleNodeSelect(this.selectedRegion&&this.selectedRegion.node)}},{key:"handleNodeSelect",value:function(e){this.emit("select",e)}},{key:"checkRegionHover",value:function(){this.hoveredRegion=this.getHoveredRegion(this.mouse.x,this.mouse.y)}},{key:"getHoveredRegion",value:function(i,a){return this.hitRegions.find(function(e){var t=e.x,n=e.y,r=e.w,e=e.h;return t<=i&&i<=t+r&&n<=a&&a<=n+e})}},{key:"getColor",value:function(e){if(this.colors[e])return this.colors[e];if(this.userColors[e]){var t=new R(this.userColors[e]);return this.colors[e]=t.alpha(.7).rgb().toString(),this.colors[e]}return this.lastRandomColor=B.rotate(10),this.colors[e]=this.lastRandomColor.alpha(.7).rgb().toString(),this.colors[e]}},{key:"calcRect",value:function(e,t,n){return{x:this.timeToPosition(e),y:n*this.nodeHeight+ +n-this.positionY+this.headerHeight,w:t*this.zoom}}},{key:"timeToPosition",value:function(e){return e*this.zoom-this.positionX*this.zoom}},{key:"renderChart",value:function(){var o,e,t,n,s=this;N(this.data,function(e,t){var n=e.start,r=e.duration,i=e.name,a=e.type,n=s.calcRect(n,r,t),r=n.x,t=n.y,n=n.w;0<r+n&&r<s.width&&0<t+s.nodeHeight&&t<s.height&&(s.addHitRegion(e,r,t,n,s.nodeHeight),s.renderRect(s.getColor(a),e.textColor||"black",i,r,t,n),s.selectedRegion&&e===s.selectedRegion.node&&(o={x:r,y:t,w:n}))}),o&&(e=o.x,t=o.y,n=o.w,this.renderStroke(e,t,n,this.nodeHeight))}},{key:"renderTimestamps",value:function(){var a=this;this.ctx.clearRect(0,0,this.width,this.charHeight),this.timestamps.slice().sort(function(e,t){return e.timestamp-t.timestamp}).reduce(function(e,t){var n=t.timestamp,r=t.color,i=t.shortName,t=a.ctx.measureText(i).width+2*a.blockPadding,n=a.timeToPosition(n),e=0<n&&n<e?e:n;return a.ctx.strokeStyle=r,a.ctx.beginPath(),a.ctx.setLineDash([8,7]),a.ctx.moveTo(n,0),a.ctx.lineTo(n,a.height),a.ctx.stroke(),a.ctx.fillStyle=r,a.ctx.fillRect(e,a.charHeight,t,a.charHeight+a.blockPadding),a.ctx.fillStyle=a.timestampColor||"black",a.ctx.fillText(i,e+a.blockPadding,2*a.charHeight),e+t},0)}},{key:"forEachTime",value:function(e){for(var t=this.timelineStart;t<=this.timelineEnd;t++){var n=t*this.timelineDelta+this.min;e(this.timeToPosition(n.toFixed(this.timelineDimension)),n)}}},{key:"renderLines",value:function(t,n){var r=this;this.ctx.fillStyle="rgb(126, 126, 126, 0.5)",this.forEachTime(function(e){r.ctx.fillRect(e,t,1,n)})}},{key:"renderTimes",value:function(){var n=this;this.ctx.clearRect(0,0,this.width,this.charHeight),this.ctx.fillStyle=this.timestampColor||"black",this.forEachTime(function(e,t){n.ctx.fillText(t.toFixed(n.timelineDimension)+"ms",e+n.blockPadding,n.charHeight-4)}),this.ctx.fillStyle="rgb(126,126,126, 0.5)",this.forEachTime(function(e){n.ctx.fillRect(e,0,1,n.charHeight)})}},{key:"renderStroke",value:function(e,t,n,r){this.ctx.setLineDash([]),this.ctx.strokeStyle="#FFFF00",this.ctx.opa,this.ctx.strokeRect(e,t,n,r)}},{key:"renderRect",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"black",n=2<arguments.length?arguments[2]:void 0,r=3<arguments.length?arguments[3]:void 0,i=4<arguments.length?arguments[4]:void 0,a=5<arguments.length?arguments[5]:void 0;this.ctx.fillStyle=e,this.ctx.fillRect(r,i,a,this.nodeHeight),!n||0<(a=a-(2*this.blockPadding-(r<0?r:0)))&&(n=n.length*this.charWidth>a?0<(a=(Math.floor(a/this.charWidth)-1)/2)?n.slice(0,Math.ceil(a))+"…"+n.slice(n.length-Math.floor(a),n.length):"":n)&&(this.ctx.fillStyle=t,this.ctx.fillText(n,(r<0?0:r)+this.blockPadding,i+this.nodeHeight-this.blockPadding))}},{key:"renderTooltip",value:function(){var t=this;if(this.hoveredRegion){var e=this.hoveredRegion.node;e.start;var n=e.duration,r=e.children,i=this.mouse.x+10,a=this.mouse.y+10,o=n-(r?r.reduce(function(e,t){return e+t.duration},0):0);this.getColor(e.type);var c=[{text:"".concat(e.name),color:"#ffffff"},"\n",{text:"".concat(n.toFixed(2)," ms"),color:"#18FFFF"},{text:"",color:"silver"}];r&&r.length&&c.push("\n",{text:"".concat(o.toFixed(2)," ms"),color:"#EEFF41"},{text:" (Self)",color:"silver"});for(var s=[""],l=0,h=c;l<h.length;l++){var u=h[l];"\n"===u?s[s.length]="":s[s.length-1]+=u.text}r=s.map(function(e){return t.ctx.measureText(e)}),o=Math.max.apply(Math,d(r.map(function(e){return e.width}))),r=r.reduce(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length?arguments[1]:void 0;return e+2+t.fontBoundingBoxAscent+t.fontBoundingBoxDescent},0),o=o+2*this.blockPadding,r=r+2*this.blockPadding;this.ctx.shadowColor="black",this.ctx.shadowBlur=5,this.ctx.fillStyle="#202124",this.ctx.fillRect(i,a,o,r),this.ctx.shadowColor=null,this.ctx.shadowBlur=null,function(e,t,n){var r={lineSpacing:2}.lineSpacing,i=0,a=0,o=0,s=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=f(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}(c);try{for(s.s();!(l=s.n()).done;){var l,h=l.value;"\n"!==h?(h.color&&(e.fillStyle=h.color),l=e.measureText(h.text),o=l.fontBoundingBoxAscent+r/2,e.fillText(h.text,t+i,n+a+o),i+=l.width):(a+=o+r/2,i=0)}}catch(e){s.e(e)}finally{s.f()}}(this.ctx,i+this.blockPadding,a+this.blockPadding)}}},{key:"render",value:function(){var e=this;requestAnimationFrame(function(){e.ctx.clearRect(0,0,e.width,e.height),e.clearHitRegions(),e.calcTimeline(),e.renderLines(0,e.height),e.renderChart(),e.ctx.clearRect(0,0,e.width,e.headerHeight),e.renderLines(0,e.headerHeight),e.renderTimestamps(),e.renderTimes(),e.renderTooltip()})}}])&&r(e.prototype,t),n&&r(e,n),l}(),W={"Seq Scan":{text:"This is the simplest way of fetching data from a table: it scans through every page of data sequentially. Like most other scans, this can apply a filter while reading data, but it needs to read the data first and then discard it. A sequential scan has no way to zero in on just the data you want: it always reads everything in the table. This is generally inefficient unless you need a large proportion of the table to answer your query, but is always available and sometimes may be the only option.",link:"https://pganalyze.com/docs/explain/scan-nodes/sequential-scan",color:"#FF5722"},"Index Scan":{link:"https://pganalyze.com/docs/explain/scan-nodes/index-scan",text:"An index scan uses an index to find either a specific row, or all rows matching a predicate. An index scan will either look up a single row at a time (for a query like WHERE id = 1234, or as the inner table in a nested loop, looking up the row matching the current outer row), or scan through a section of the table in order. An index scan must first look up each row in the index, and then check the actual table data for that index entry. The table data must be checked to ensure that the row it found is actually visible to the current transaction, and also to fetch any columns included in the query that are not present in the index. Because of this, an index scan actually has higher per-row overhead than a sequential scan: its real advantage is that it allows you to read only some of the rows in a table. If your query predicate is not very selective (that is, if few rows are filtered out), a sequential scan may still be more efficient than an index scan.\n\n        If your query predicate matches the index exactly, the scan will retrieve just the matching rows. If you have an additional predicate in your query, the index scan can filter rows as it’s reading them, just like a sequential scan."},"Index Only Scan":{link:"https://pganalyze.com/docs/explain/scan-nodes/index-only-scan",text:"This is very similar to an Index Scan, but the data comes directly from the index and the visibility check is handled specially, so it can avoid looking at the table data entirely. An index-only scan is faster, but it’s not always available as an alternative to a regular index scan. It has two restrictions: the index type must support Index-Only Scans (the common btree index type always does) and (somewhat obviously) the query must only project columns included in the index. If you have a SELECT * query but don’t actually need all columns, you may be able to use an index-only scan just by changing the column list."},"Bitmap Heap Scan":{link:"https://pganalyze.com/docs/explain/scan-nodes/bitmap-heap-scan",text:"A bitmap heap scan takes a row location bitmap generated by a Bitmap Index Scan (either directly, or through a series of bitmap set operations via BitmapAnd and BitmapOr nodes) and looks up the relevant data. Each chunk of a bitmap can either be exact (pointing directly to rows) or lossy (pointing to a page containing at least one row matching the predicate).\n\n        Postgres prefers using exact blocks, but if limited work_mem is an issue, it will start using lossy blocks as well. The blocks are actually produced as lossy or exact by children of the bitmap heap scan, but that status is more relevant when the blocks are processed to fetch rows, so it is reflected in the Bitmap Heap Scan. If a bitmap block is lossy, the node will need to fetch the entire page, and re-check the specified index condition (since it doesn’t know which rows on the page are needed)."},"Bitmap Index Scan":{link:"https://pganalyze.com/docs/explain/scan-nodes/bitmap-index-scan",text:"You can think of a bitmap index scan as a middle ground between a sequential scan and an index scan. Like an index scan, it scans an index to determine exactly what data it needs to fetch, but like a sequential scan, it takes advantage of data being easier to read in bulk.\n\n        The bitmap index scan actually operates in tandem with a Bitmap Heap Scan: it does not fetch the data itself. Instead of producing the rows directly, the bitmap index scan constructs a bitmap of potential row locations. It feeds this data to a parent Bitmap Heap Scan, which can decode the bitmap to fetch the underlying data, grabbing data page by page.\n        \n        A Bitmap Heap Scan is the most common parent node of a Bitmap Index Scan, but a plan may also combine several different Bitmap Index Scans with BitmapAnd or BitmapOr nodes before actually fetching the underlying data. This allows Postgres to use two different indexes at once to execute a query."},"CTE Scan":{link:"https://pganalyze.com/docs/explain/scan-nodes/cte-scan",text:"Scan the result of a common table expression. Note that until Postgres 12, common table expressions are an optimization fence; the CTE result is materialized, and is essentially treated as a temporary table and not optimized as part of the query. If you depend on this behavior, be aware performance of your queries may change when you upgrade."},"Custom Scan":{link:"https://pganalyze.com/docs/explain/scan-nodes/custom-scan",text:"Scan using a custom scan implementation, which can be added as a separate module and plug into standard Postgres query planning and execution."},"Foreign Scan":{link:"https://pganalyze.com/docs/explain/scan-nodes/foreign-scan",text:"Scan on a Foreign Table."},"Function Scan":{link:"https://pganalyze.com/docs/explain/scan-nodes/function-scan",text:"Scans the result of a set-returning function (like unnest or regexp_split_to_table)."},"Subquery Scan":{text:"A Subquery Scan is for scanning the output of a sub-query in the range table. We often need an extra plan node above the sub-query's plan to perform expression evaluations (which we can't push into the sub-query without risking changing its semantics).",link:"https://pganalyze.com/docs/explain/scan-nodes/subquery-scan"},"Table Sample Scan":{link:"https://pganalyze.com/docs/explain/scan-nodes/table-sample-scan",text:"Scan a table when the TABLESAMPLE feature is used. Note that this clause does change the semantics of your query, but if you’re looking to gather some statistics about data in a large table, it can be a lot more efficient than a full sequential scan."},"Tid Scan":{link:"https://pganalyze.com/docs/explain/scan-nodes/tid-scan",text:"Similar to an Index Scan, but one that can only look up rows using the internal and unstable ctid identifier. You are unlikely to use this type of scan in your queries."},"Values Scan":{link:"https://pganalyze.com/docs/explain/scan-nodes/values-scan",text:"Scan the literal VALUES clause."},"Work Table Scan":{link:"https://pganalyze.com/docs/explain/scan-nodes/work-table-scan",text:"Scans the work table used in evaluating a recursive common table expression."}},U={Sort:"#EA80FC",Aggregate:"#673AB7",Append:"#9C27B0",SetOp:"#9E9E9E","Subquery Scan":"#2196F3","Index Scan":"#FF9800","Hash Join":"#4CAF50",Hash:"#8BC34A","Nested Loop Join":"#f44336","Seq Scan":"#FF5722","":""},V=[{Plan:{"Node Type":"Sort","Parallel Aware":!1,"Startup Cost":482.81,"Total Cost":485.31,"Plan Rows":1e3,"Plan Width":524,"Sort Key":['"*SELECT* 1".title'],Plans:[{"Node Type":"SetOp",Strategy:"Hashed","Parent Relationship":"Outer","Parallel Aware":!1,Command:"Except","Startup Cost":0,"Total Cost":432.98,"Plan Rows":1e3,"Plan Width":524,Plans:[{"Node Type":"Append","Parent Relationship":"Outer","Parallel Aware":!1,"Startup Cost":0,"Total Cost":405.08,"Plan Rows":5581,"Plan Width":524,Plans:[{"Node Type":"Subquery Scan","Parent Relationship":"Member","Parallel Aware":!1,Alias:"*SELECT* 1","Startup Cost":0,"Total Cost":74,"Plan Rows":1e3,"Plan Width":23,Plans:[{"Node Type":"Seq Scan","Parent Relationship":"Subquery","Parallel Aware":!1,"Relation Name":"film",Alias:"film","Startup Cost":0,"Total Cost":64,"Plan Rows":1e3,"Plan Width":19}]},{"Node Type":"Subquery Scan","Parent Relationship":"Member","Parallel Aware":!1,Alias:"*SELECT* 2","Startup Cost":228.01,"Total Cost":331.08,"Plan Rows":4581,"Plan Width":23,Plans:[{"Node Type":"Aggregate",Strategy:"Hashed","Partial Mode":"Simple","Parent Relationship":"Subquery","Parallel Aware":!1,"Startup Cost":228.01,"Total Cost":273.82,"Plan Rows":4581,"Plan Width":17,"Group Key":["inventory.film_id","film_1.title"],Plans:[{"Node Type":"Hash Join","Parent Relationship":"Outer","Parallel Aware":!1,"Join Type":"Inner","Startup Cost":76.5,"Total Cost":205.1,"Plan Rows":4581,"Plan Width":17,"Inner Unique":!0,"Hash Cond":"(inventory.film_id = film_1.film_id)",Plans:[{"Node Type":"Seq Scan","Parent Relationship":"Outer","Parallel Aware":!1,"Relation Name":"inventory",Alias:"inventory","Startup Cost":0,"Total Cost":70.81,"Plan Rows":4581,"Plan Width":2},{"Node Type":"Hash","Parent Relationship":"Inner","Parallel Aware":!1,"Startup Cost":64,"Total Cost":64,"Plan Rows":1e3,"Plan Width":19,Plans:[{"Node Type":"Seq Scan","Parent Relationship":"Outer","Parallel Aware":!1,"Relation Name":"film",Alias:"film_1","Startup Cost":0,"Total Cost":64,"Plan Rows":1e3,"Plan Width":19}]}]}]}]}]}]}]}}];window.onload=function(){function e(){var e=function(e){e=e.map(function(e){return e.Plan});var i=[],e=function n(r,i,a,e){var o=3<arguments.length&&void 0!==e?e:0;return r.map(function(e){var t=(t=i(e))&&n(t,i,a,o+1);return a(e,t,r,o)})}(e,function(e){return e&&e.Plans||(e.Plan?[e.Plan]:null)},function(e,t,n,r){void 0===i[r]&&(i[r]=i[r-1]||0);e={name:e["Node Type"],start:i[r],duration:e["Actual Total Time"]||e["Total Cost"],type:e["Node Type"],textColor:"#ffffff",children:t,original:h(h({},e),{},{Plans:void 0,Plan:void 0})};return i[r]+=e.duration,e});return console.log(e),e}(JSON.parse(n.value)),t=[{shortName:"START",fullName:"START",timestamp:0,color:"#d7c44c"},{shortName:"END",fullName:"END",timestamp:e[0].duration,color:"#d7c44c"}];o.resetView(),o.setTimestamps(t,!1),o.setData(e,!0),console.log("Rendered!")}var t=document.getElementById("root"),n=document.getElementById("input"),r=document.getElementById("button"),i=document.getElementById("selected-node"),a=document.getElementById("selected-node-hint");n.value=JSON.stringify(V),t.width=window.innerWidth-40,t.height=window.innerHeight/2;var o=new D({canvas:t,data:[],colors:U});o.timestampColor="#888888",o.on("select",function(e){e?(e=h({},e.original),i.innerHTML=JSON.stringify(e,null,"  "),a.innerHTML=function(e){var t=e["Node Type"],e=W[t];if(e)return"\n            <a href='".concat(e.link,'\' target="_blank">').concat(t,"</a>\n            <quote>").concat(e.text,"</quote>\n        ");return"No info about this node type."}(e)):(a.innerHTML="",i.innerHTML="")}),window.addEventListener("resize",e),r.addEventListener("click",e),requestAnimationFrame(e)}}();
//# sourceMappingURL=index.min.js.map
